MDFloatLayout:
    md_bg_color: self.theme_cls.primaryContainerColor

    MDTopAppBar:
        id: top_bar
        type: "small"
        pos_hint: {"top": 1}
        size_hint_x: 1
        elevation: 4
        # allow_hidden: True    # not sure what this dues
                
        MDTopAppBarLeadingButtonContainer:
            MDActionTopAppBarButton:
                id: back_leading_button
                icon: ""
                on_press: app.go_back_screen()
                
        MDTopAppBarTitle:
            # If changed, the TrailingButtonContainer gets to the left... do not touch
            text: " "
            halign: "left"

        MDTopAppBarTrailingButtonContainer:
            MDActionTopAppBarButton:
                id: dots_menu
                icon: "dots-vertical"
                on_press: app.open_top_menu(self)

    ScreenManager:
        id: screen_manager

    MDNavigationBar:
        halign: 'center'
        MDNavigationItem:
            on_press: app.switch_screen("second_screen")
            MDNavigationItemIcon:
                icon: "numeric-2"
            MDNavigationItemLabel:
                text: "Screen 2"
                
        MDNavigationItem:
            active: True
            on_press: app.switch_screen("home_screen")
            MDNavigationItemIcon:
                icon: "home"
            MDNavigationItemLabel:
                text: "Home"

        MDNavigationItem:
            on_press: app.switch_screen("third_screen")
            MDNavigationItemIcon:
                icon: "numeric-3"
            MDNavigationItemLabel:
                text: "Screen 3"


    MDFloatLayout:
        id: progress_overlay
        size_hint: None, None
        height: self.parent.height  
        width: self.parent.width  
        pos: self.parent.pos
        opacity: 0
        canvas.before: 
            # ensures the background is rendered before any child widgets 
            Color:
                rgba: 0.85, 0.85, 0.85, 0.5  # Semi-transparent white
            Rectangle:
                pos: self.pos
                size: self.size

        MDCircularProgressIndicator:
            id: main_progress_bar
            size_hint: None, None
            size: "48dp", "48dp"
            determinate: False
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

